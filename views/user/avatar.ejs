<%- layout("/layouts/trashoBoilerplate") %>

<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        flex-direction: column;
        text-align: center;
        background: url('/images/avatar_bg.png') no-repeat center/cover;
    }
    div {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        width: 350px;
        text-align: center;
        position: absolute;
        top: 20%;
        left: 37%;
    }
    img {
        border-radius: 50%;
        border: 3px solid #333;
    }
    .btn-primary {
        background: #ff9800;
        border: none;
        padding: 12px 20px;
        border-radius: 10px;
        transition: 0.3s;
        margin: 5px;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }
    .btn-success {
        background: #11b14e;
        border: none;
        padding: 12px 20px;
        border-radius: 10px;
        transition: 0.3s;
        margin: 5px;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }
    
    .btn-primary:hover {
        background: #e68900;
    }
</style>

<div>
    <h2>Select Your Avatar</h2>
    <img id="avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=random" width="150" height="150" alt="Avatar">
    
    <br><br>
    
    <button class="btn btn-primary" onclick="generateAvatar()">Generate New Avatar</button>
    <button class="btn btn-success" onclick="selectAvatar()">Select Avatar</button>

    <form id="avatarForm" action="/trasho/avatar" method="POST" style="display: none;">
        <input type="hidden" name="user[avatar]" id="avatarInput">
    </form>
</div>

<script>
    function generateAvatar() {
        let randomSeed = Math.random().toString(36).substring(7); // Generate a random string
        let avatarUrl = `https://api.dicebear.com/7.x/avataaars/svg?seed=${randomSeed}`;
        document.getElementById("avatar").src = avatarUrl;
    }

    function selectAvatar() {
        let selectedAvatar = document.getElementById("avatar").src;
        document.getElementById("avatarInput").value = selectedAvatar;
        document.getElementById("avatarForm").submit();
    }
</script>
